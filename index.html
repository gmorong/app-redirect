<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Redirecting to app...</title>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Получаем все параметры из URL
            const params = new URLSearchParams(window.location.search);
            
            // Строим URL для приложения
            let appUrl = 'io.supabase.pointo://reset-callback/';
            
            // Проверяем, есть ли токен в URL
            if (params.has('token')) {
                const token = params.get('token');
                appUrl += '?token=' + encodeURIComponent(token);
            }
            
            // Добавляем остальные параметры
            params.forEach((value, key) => {
                if (key !== 'token') { // Избегаем дублирования токена
                    appUrl += (appUrl.includes('?') ? '&' : '?') + 
                              key + '=' + encodeURIComponent(value);
                }
            });
            
            // Обновляем ссылку
            document.getElementById('app-link').href = appUrl;
            
            // Перенаправляем на приложение
            setTimeout(function() {
                window.location.href = appUrl;
            }, 500);
        });
    </script>
    <style>
        /* Ваши стили */
    </style>
</head>
<body>
    <div class="container">
        <h1>Redirecting to app...</h1>
        <div class="spinner"></div>
        <p>If you are not redirected automatically, please click the button below:</p>
        <a id="app-link" href="#" class="app-button">Open App</a>
    </div>
</body>
</html>
